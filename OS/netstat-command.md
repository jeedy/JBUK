# netstat 명령어 설명

netstat(network statistics)는  전송 제어 프로토콜, 라우팅 테이블, 수많은 네트워크 인터페이스(네트워크 인터페이스 컨트롤러 또는 소프트웨어 정의 네트워크 인터페이스), 네트워크 프로토콜 통계를 위한 네트워크 연결을 보여주는 명령 줄 도구이다.
(LINUX 기준, Windows는 옵션 사용법에서 조금 다르다.)
## 기본명령어
```bash
$ netstat -anp
```

## 옵션 (가장 많이 사용할 옵션 순서)
옵션 | 기능
---|---
-a | 모든 연결 및 수신 대기 포트를 표시한다.
-n | 주소나 포트 형식을 숫자로 표현한다.
-p | 해당프로토콜을 사용하는 프로그램, 프로세스 ID 보여줌
-e | 랜카드에서 송수신한 패킷 용량 및 사용자 정보
-t | tcp protocol
-u | udp protocol
-r | 라우팅 테이블 확인
-s | IP, ICMP, UDP프로토콜별의 상태를 보여줌

## 상태값

> SYN, ACK 등 handshake 관련 용어의 자세한 설명은 [Network Handshake](/network/tcp-3way-4way-handshake.md) 을 참고한다.

상태 | 내용
---|---
LISTEN | 연결 요구를 기다리는 상태, 포트가 열려 있음
ESTABLISHED | 서로 연결되어 있는 상태
SYN_SEND | [클라이언트 기준] 클라이언트가 서버에 SYN 패킷을 보내고 연결을 요청한 상태
SYN_RECV | [서버 기준] 서버가 클라이언트의 SYN 패킷으로 요청을 받은 후 응답으로 SYN/ACK 패킷을 보내고 클라이언트에게 ACK 를 받기 위해 기다리는 상태
TIME_WAIT | [클라이언트 기준] 이미 해당 사이트와 연결이 종료되었거나 다음 연결을 위해 기다리는 상태
CLOSE_WAIT | [서버 기준] 원격의 연결 요청을 받고 연결이 종료되길 기다리는 상태
LAST_ACK | [서버 기준] 연결이 종료되었고 승인을 기다리는 상태
CLOSED | 완전히 연결이 종료된 상태
